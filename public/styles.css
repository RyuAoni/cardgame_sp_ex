*,
*::before,
*::after { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Helvetica Neue", Arial, sans-serif;
  color: #0f172a;
  background: #f8fafc;
}

/* デザイントークン */
:root{
  --bg: #f8fafc;            /* slate-50 */
  --card: #ffffff;          /* white */
  --border: #e2e8f0;        /* slate-200 */
  --text: #0f172a;          /* slate-900 */
  --muted: #64748b;         /* slate-500 */
  --primary: #0ea5e9;       /* sky-500 */
  --primary-600: #0284c7;   /* sky-600 */
  --accent: #0e7490;        /* teal-700 */
  --shadow: 0 1px 2px rgba(15,23,42,.06), 0 4px 16px rgba(15,23,42,.06);
  --radius: 12px;
}

/* ---- Header ---- */
.app-header{
  position: sticky; top: 0; z-index: 10;
  backdrop-filter: saturate(1.1) blur(6px);
  background: rgba(255,255,255,.85);
  border-bottom: 1px solid var(--border);
}
.app-header__inner{
  max-width: 1000px; margin: 0 auto; padding: 12px 16px;
  display: flex; align-items: center; gap: 12px;
}
.brand{
  display:flex; align-items:center; gap:10px;
  font-weight: 700; letter-spacing: .02em; font-size: 18px;
  text-decoration: none; color: var(--text);
}
.brand-logo{ height: 28px; }

/* ---- Top Nav ---- */
.topnav{
  margin-left: auto;
  display: flex;
  gap: 8px;
}
.topnav a,
.btn{
  font-size: 14px;
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  color: var(--text);
  text-decoration: none;
}
.topnav a.is-active{ background: #eef2f7; }

/* ---- Main ---- */
.app-main{
  max-width: 1000px; margin: 0 auto;
  padding: 24px 16px 88px; /* 88px: 下タブの余白 */
}
.page-title{
  font-size: 20px; font-weight: 600;
  margin: 0 0 12px;
}
.page-head{
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 16px;
}

/* ---- Grid & Card ---- */
.grid{
  display: grid; gap: 16px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}
@media (min-width: 768px){
  .grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
}
.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
  box-shadow: var(--shadow);
}
.card img{
  width: 100%;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 10px;
  display: block;
}
.card .meta{
  margin-top: 8px;
  font-size: 13px;
  color: var(--muted);
}

/* ---- Buttons ---- */
.btn{
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  background: #fff; border: 1px solid var(--border);
  box-shadow: var(--shadow);
  cursor: pointer;
}
.btn:hover{
  box-shadow: 0 2px 4px rgba(15,23,42,.08), 0 6px 20px rgba(15,23,42,.08);
}
.btn.primary{
  background: var(--primary); color: #fff; border-color: transparent;
}
.btn.primary:hover{ background: var(--primary-600); }

/* ---- Forms ---- */
.input, .textarea, .select{
  width: 100%; font-size: 14px; border-radius: 10px;
  border: 1px solid var(--border); padding: 10px 12px;
  background: #fff; color: var(--text);
}
.form-row{ display: flex; gap: 12px; align-items: center; }
.help{ color: var(--muted); font-size: 12px; }

/* ---- Map (OSM/Leaflet) ---- */
.map{
  height: 400px; width: 100%;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background:#fff; overflow:hidden; box-shadow: var(--shadow);
}
/* ポリライン色のトンマナ合わせ（Leaflet既定を上書き） */
.leaflet-pane .leaflet-interactive{ stroke: var(--accent) !important; }

/* ---- Bottom Tabs ---- */
.bottom-tabs{
  position: sticky; bottom: 0; z-index: 10;
  background: rgba(255,255,255,.92); backdrop-filter: blur(6px);
  border-top: 1px solid var(--border);
}
.bottom-tabs__inner{
  max-width: 1000px; margin: 0 auto;
  display:grid; grid-template-columns: repeat(4,1fr);
}
.tab{
  display:flex; flex-direction:column; align-items:center; gap:2px;
  padding: 10px 8px; font-size: 12px; color: var(--muted);
  text-decoration: none;
}
.tab .tab-icon{
  inline-size: 24px; block-size: 24px;
  background-size: contain; background-repeat: no-repeat;
  display: inline-block;
}
.tab.is-active{ color: var(--text); font-weight: 600; }

/* ---- Brand Icons (絶対パスに修正済) ---- */
.tab-icon.home     { background-image: url("/brand/02-home.svg"); }
.tab-icon.template { background-image: url("/brand/03-template.svg"); }
.tab-icon.draw     { background-image: url("/brand/04-draw.svg"); }
.tab-icon.user     { background-image: url("/brand/05-user.svg"); }
.badge-icon{
  inline-size: 18px; block-size: 18px;
  background: url("/brand/06-badge.svg") no-repeat center/contain;
}
.pattern-bg{ background: url("/brand/07-hero-pattern.svg") repeat; }

/* ---- Utilities ---- */
.space-y-8 > * + *{ margin-top: 20px; }
.text-muted{ color: var(--muted); }
.hide-mobile{ display:none; }
@media (min-width: 768px){ .hide-mobile{ display:block; } }

/* ---- Focus visible ---- */
:focus-visible{
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}
